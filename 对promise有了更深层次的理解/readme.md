在工作中遇到的问题,让我对promise有了更深入的认识
===

问题描述如下
---

* 需求: 后端对黑名单邮箱进行过滤,不对黑名单用户发送验证码
* 之前的实现: 前端做了简单的正则格式匹配,对于符合邮箱格式的邮箱判断校验通过,通过后开始倒计时,后端却没有发送验证码
* 解决方案: 前端通过请求后端接口校验邮箱是否合法,后端返回合法时才发送第二个获取验证码请求
  
在父组件中定义的方法
![](../img/promise1.png '描述')

子组件中使用该方法
![](../img/promise2.png '描述')

输出的内容
![](../img/promise3.png '描述')

其实status的结果应该是一个值,但是为什么现在变成了一个Promise

给verfifyFun加一个await
![](../img/promise4.png '描述')
输出:
![](../img/promise5.png '描述')

那么,status为什么从一个Number变成了一个Promise
---

可能很多人都会有相同的疑问,通过查阅相关文档
```
async函数的返回值是 Promise 对象，这比 Generator 函数的返回值是 Iterator 对象方便多了。你可以用then方法指定下一步的操作。
async函数返回一个 Promise 对象，可以使用then方法添加回调函数。当函数执行的时候，一旦遇到await就会先返回，等到异步操作完成，再接着执行函数体内后面的语句。
```